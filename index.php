<?php
declare(strict_types=1);

require './src/Neuron.php';
require './src/MultiLayerPerceptronNetwork.php';

$network = new App\MultiLayerPerceptronNetwork(array(), 6, 1, 0.1);

$data = [
    array(array(0.375,150),3),
    array(array(0.416666666666667,150),5),
    array(array(0.458333333333333,150),5),
    array(array(0.5,150),3),
    array(array(0.541666666666667,150),3),
    array(array(0.583333333333333,150),3),
    array(array(0.625,150),5),
    array(array(0.666666666666667,150),5),
    array(array(0.708333333333333,150),5),
    array(array(0.75,150),3),
    array(array(0.375,150),3),
    array(array(0.416666666666667,150),3),
    array(array(0.458333333333333,150),3),
    array(array(0.5,150),4),
    array(array(0.541666666666667,150),5),
    array(array(0.583333333333333,150),5),
    array(array(0.625,150),4),
    array(array(0.666666666666667,150),3),
    array(array(0.708333333333333,150),3),
    array(array(0.75,150),3),
    array(array(0.375,150),3),
    array(array(0.416666666666667,150),4),
    array(array(0.458333333333333,150),3),
    array(array(0.5,150),3),
    array(array(0.541666666666667,150),5),
    array(array(0.583333333333333,150),5),
    array(array(0.625,150),3),
    array(array(0.666666666666667,150),5),
    array(array(0.708333333333333,150),3),
    array(array(0.75,150),5),
    array(array(0.375,150),4),
    array(array(0.416666666666667,150),5),
    array(array(0.458333333333333,150),4),
    array(array(0.5,150),3),
    array(array(0.541666666666667,150),4),
    array(array(0.583333333333333,150),4),
    array(array(0.625,150),4),
    array(array(0.666666666666667,150),3),
    array(array(0.708333333333333,150),4),
    array(array(0.75,150),5),
    array(array(0.375,150),3),
    array(array(0.416666666666667,150),4),
    array(array(0.458333333333333,150),5),
    array(array(0.5,150),5),
    array(array(0.541666666666667,150),3),
    array(array(0.583333333333333,150),5),
    array(array(0.625,150),3),
    array(array(0.666666666666667,150),3),
    array(array(0.708333333333333,150),3),
    array(array(0.75,150),5),
    array(array(0.375,150),3),
    array(array(0.416666666666667,150),4),
    array(array(0.458333333333333,150),3),
    array(array(0.5,150),4),
    array(array(0.541666666666667,150),5),
    array(array(0.583333333333333,150),3),
    array(array(0.625,150),3),
    array(array(0.666666666666667,150),5),
    array(array(0.708333333333333,150),4),
    array(array(0.75,150),5),
    array(array(0.375,150),5),
    array(array(0.416666666666667,150),5),
    array(array(0.458333333333333,150),5),
    array(array(0.5,150),4),
    array(array(0.541666666666667,150),4),
    array(array(0.583333333333333,150),4),
    array(array(0.625,150),4),
    array(array(0.666666666666667,150),3),
    array(array(0.708333333333333,150),4),
    array(array(0.75,150),5),
    array(array(0.375,150),3),
    array(array(0.416666666666667,150),4),
    array(array(0.458333333333333,150),5),
    array(array(0.5,150),5),
    array(array(0.541666666666667,150),3),
    array(array(0.583333333333333,150),5),
    array(array(0.625,150),5),
    array(array(0.666666666666667,150),5),
    array(array(0.708333333333333,150),3),
    array(array(0.75,150),3),
    array(array(0.375,150),5),
    array(array(0.416666666666667,150),4),
    array(array(0.458333333333333,150),4),
    array(array(0.5,150),4),
    array(array(0.541666666666667,150),5),
    array(array(0.583333333333333,150),3),
    array(array(0.625,150),5),
    array(array(0.666666666666667,150),3),
    array(array(0.708333333333333,150),3),
    array(array(0.75,150),5),
    array(array(0.375,150),5),
    array(array(0.416666666666667,150),3),
    array(array(0.458333333333333,150),5),
    array(array(0.5,150),5),
    array(array(0.541666666666667,150),3),
    array(array(0.583333333333333,150),4),
    array(array(0.625,150),4),
    array(array(0.666666666666667,150),5),
    array(array(0.708333333333333,150),5),
    array(array(0.75,150),4),
    array(array(0.375,150),4),
    array(array(0.416666666666667,150),4),
    array(array(0.458333333333333,150),4),
    array(array(0.5,150),3),
    array(array(0.541666666666667,150),5),
    array(array(0.583333333333333,150),4),
    array(array(0.625,150),3),
    array(array(0.666666666666667,150),3),
    array(array(0.708333333333333,150),3),
    array(array(0.75,150),4),
    array(array(0.375,150),5),
    array(array(0.416666666666667,150),4),
    array(array(0.458333333333333,150),3),
    array(array(0.5,150),5),
    array(array(0.541666666666667,150),5),
    array(array(0.583333333333333,150),5),
    array(array(0.625,150),3),
    array(array(0.666666666666667,150),5),
    array(array(0.708333333333333,150),3),
    array(array(0.75,150),5),
    array(array(0.375,150),4),
    array(array(0.416666666666667,150),3),
    array(array(0.458333333333333,150),3),
    array(array(0.5,150),5),
    array(array(0.541666666666667,150),3),
    array(array(0.583333333333333,150),5),
    array(array(0.625,150),5),
    array(array(0.666666666666667,150),5),
    array(array(0.708333333333333,150),3),
    array(array(0.75,150),5),
    array(array(0.375,150),3),
    array(array(0.416666666666667,150),5),
    array(array(0.458333333333333,150),3),
    array(array(0.5,150),4),
    array(array(0.541666666666667,150),3),
    array(array(0.583333333333333,150),5),
    array(array(0.625,150),4),
    array(array(0.666666666666667,150),3),
    array(array(0.708333333333333,150),3),
    array(array(0.75,150),3),
    array(array(0.375,150),3),
    array(array(0.416666666666667,150),4),
    array(array(0.458333333333333,150),3),
    array(array(0.5,150),5),
    array(array(0.541666666666667,150),5),
    array(array(0.583333333333333,150),3),
    array(array(0.625,150),3),
    array(array(0.666666666666667,150),5),
    array(array(0.708333333333333,150),3),
    array(array(0.75,150),4),
    array(array(0.375,150),3),
    array(array(0.416666666666667,150),4),
    array(array(0.458333333333333,150),4),
    array(array(0.5,150),5),
    array(array(0.541666666666667,150),3),
    array(array(0.583333333333333,150),4),
    array(array(0.625,150),3),
    array(array(0.666666666666667,150),3),
    array(array(0.708333333333333,150),5),
    array(array(0.75,150),3),
    array(array(0.375,150),5),
    array(array(0.416666666666667,150),4),
    array(array(0.458333333333333,150),5),
    array(array(0.5,150),4),
    array(array(0.541666666666667,150),5),
    array(array(0.583333333333333,150),3),
    array(array(0.625,150),5),
    array(array(0.666666666666667,150),5),
    array(array(0.708333333333333,150),3),
    array(array(0.75,150),5),
    array(array(0.375,150),5),
    array(array(0.416666666666667,150),4),
    array(array(0.458333333333333,150),3),
    array(array(0.5,150),4),
    array(array(0.541666666666667,150),3),
    array(array(0.583333333333333,150),5),
    array(array(0.625,150),5),
    array(array(0.666666666666667,150),5),
    array(array(0.708333333333333,150),5),
    array(array(0.75,150),3),
    array(array(0.375,150),4),
    array(array(0.416666666666667,150),5),
    array(array(0.458333333333333,150),3),
    array(array(0.5,150),4),
    array(array(0.541666666666667,150),3),
    array(array(0.583333333333333,150),4),
    array(array(0.625,150),5),
    array(array(0.666666666666667,150),4),
    array(array(0.708333333333333,150),3),
    array(array(0.75,150),5),
    array(array(0.375,150),3),
    array(array(0.416666666666667,150),3),
    array(array(0.458333333333333,150),3),
    array(array(0.5,150),3),
    array(array(0.541666666666667,150),4),
    array(array(0.583333333333333,150),4),
    array(array(0.625,150),5),
    array(array(0.666666666666667,150),4),
    array(array(0.708333333333333,150),3),
    array(array(0.75,150),5),
    array(array(0.375,150),3),
    array(array(0.416666666666667,150),4),
    array(array(0.458333333333333,150),5),
    array(array(0.5,150),5),
    array(array(0.541666666666667,150),5),
    array(array(0.583333333333333,150),5),
    array(array(0.625,150),3),
    array(array(0.666666666666667,150),5),
    array(array(0.708333333333333,150),3),
    array(array(0.75,150),5),
    array(array(0.375,150),3),
    array(array(0.416666666666667,150),3),
    array(array(0.458333333333333,150),3),
    array(array(0.5,150),5),
    array(array(0.541666666666667,150),3),
    array(array(0.583333333333333,150),3),
    array(array(0.625,150),4),
    array(array(0.666666666666667,150),5),
    array(array(0.708333333333333,150),4),
    array(array(0.75,150),5),
    array(array(0.375,150),3),
    array(array(0.416666666666667,150),3),
    array(array(0.458333333333333,150),4),
    array(array(0.5,150),5),
    array(array(0.541666666666667,150),5),
    array(array(0.583333333333333,150),3),
    array(array(0.625,150),4),
    array(array(0.666666666666667,150),3),
    array(array(0.708333333333333,150),4),
    array(array(0.75,150),4),
    array(array(0.375,150),3),
    array(array(0.416666666666667,150),5),
    array(array(0.458333333333333,150),3),
    array(array(0.5,150),5),
    array(array(0.541666666666667,150),3),
    array(array(0.583333333333333,150),5),
    array(array(0.625,150),4),
    array(array(0.666666666666667,150),4),
    array(array(0.708333333333333,150),5),
    array(array(0.75,150),5),
    array(array(0.375,150),5),
    array(array(0.416666666666667,150),4),
    array(array(0.458333333333333,150),4),
    array(array(0.5,150),5),
    array(array(0.541666666666667,150),5),
    array(array(0.583333333333333,150),3),
    array(array(0.625,150),5),
    array(array(0.666666666666667,150),3),
    array(array(0.708333333333333,150),3),
    array(array(0.75,150),4),
    array(array(0.375,150),4),
    array(array(0.416666666666667,150),4),
    array(array(0.458333333333333,150),5),
    array(array(0.5,150),5),
    array(array(0.541666666666667,150),4),
    array(array(0.583333333333333,150),3),
    array(array(0.625,150),5),
    array(array(0.666666666666667,150),5),
    array(array(0.708333333333333,150),3),
    array(array(0.75,150),3),
    array(array(0.375,150),5),
    array(array(0.416666666666667,150),3),
    array(array(0.458333333333333,150),4),
    array(array(0.5,150),4),
    array(array(0.541666666666667,150),5),
    array(array(0.583333333333333,150),5),
    array(array(0.625,150),4),
    array(array(0.666666666666667,150),3),
    array(array(0.708333333333333,150),5),
    array(array(0.75,150),3),
    array(array(0.375,150),4),
    array(array(0.416666666666667,150),5),
    array(array(0.458333333333333,150),5),
    array(array(0.5,150),4),
    array(array(0.541666666666667,150),3),
    array(array(0.583333333333333,150),3),
    array(array(0.625,150),3),
    array(array(0.666666666666667,150),3),
    array(array(0.708333333333333,150),5),
    array(array(0.75,150),5),
    array(array(0.375,150),4),
    array(array(0.416666666666667,150),4),
    array(array(0.458333333333333,150),3),
    array(array(0.5,150),4),
    array(array(0.541666666666667,150),5),
    array(array(0.583333333333333,150),4),
    array(array(0.625,150),5),
    array(array(0.666666666666667,150),5),
    array(array(0.708333333333333,150),4),
    array(array(0.75,150),4),
    array(array(0.375,150),5),
    array(array(0.416666666666667,150),5),
    array(array(0.458333333333333,150),4),
    array(array(0.5,150),5),
    array(array(0.541666666666667,150),3),
    array(array(0.583333333333333,150),4),
    array(array(0.625,150),4),
    array(array(0.666666666666667,150),4),
    array(array(0.708333333333333,150),5),
    array(array(0.75,150),4),
    array(array(0.375,150),3),
    array(array(0.416666666666667,150),3),
    array(array(0.458333333333333,150),5),
    array(array(0.5,150),4),
    array(array(0.541666666666667,150),5),
    array(array(0.583333333333333,150),3),
    array(array(0.625,150),4),
    array(array(0.666666666666667,150),3),
    array(array(0.708333333333333,150),4),
    array(array(0.75,150),4),
    array(array(0.375,150),5),
    array(array(0.416666666666667,150),3),
    array(array(0.458333333333333,150),5),
    array(array(0.5,150),5),
    array(array(0.541666666666667,150),3),
    array(array(0.583333333333333,150),4),
    array(array(0.625,150),5),
    array(array(0.666666666666667,150),4),
    array(array(0.708333333333333,150),4),
    array(array(0.75,150),4),
    array(array(0.375,150),4),
    array(array(0.416666666666667,150),4),
    array(array(0.458333333333333,150),3),
    array(array(0.5,150),5),
    array(array(0.541666666666667,150),5),
    array(array(0.583333333333333,150),3),
    array(array(0.625,150),4),
    array(array(0.666666666666667,150),4),
    array(array(0.708333333333333,150),5),
    array(array(0.75,150),3),
    array(array(0.375,150),5),
    array(array(0.416666666666667,150),4),
    array(array(0.458333333333333,150),3),
    array(array(0.5,150),5),
    array(array(0.541666666666667,150),4),
    array(array(0.583333333333333,150),4),
    array(array(0.625,150),3),
    array(array(0.666666666666667,150),4),
    array(array(0.708333333333333,150),5),
    array(array(0.75,150),3),
    array(array(0.375,150),3),
    array(array(0.416666666666667,150),5),
    array(array(0.458333333333333,150),4),
    array(array(0.5,150),5),
    array(array(0.541666666666667,150),5),
    array(array(0.583333333333333,150),5),
    array(array(0.625,150),5),
    array(array(0.666666666666667,150),4),
    array(array(0.708333333333333,150),5),
    array(array(0.75,150),4),
];

$expectedTT = 0.0;
$outputTT = 0.0;
$text = "%u.%u.%uº Tentativa  = Esperado: %.2f Gerado: %.2f Resultado: %.2f" . PHP_EOL;

$start = date("H:i:s");

ob_start();

for ($j=0; $j < 20000; $j++) 
{ 
        
    for ($i=0; $i < count($data); $i++) 
    { 
        
        $network->backward($data[$i][0], [$data[$i][1]]);
        $outputs = $network->getOutputs()[0];
        $expected = $data[$i][1];
        printf($text, $j, $i, 1, $expected, $outputs, ($outputs / $expected));

        $expectedTT += $expected;
        $outputTT += $outputs;

    }

}

echo ob_get_contents();

echo "Esperado: $expectedTT Real: $outputTT  Resultado: " . ($outputTT / $expectedTT) . "%" . PHP_EOL;

echo "Iniciou as $start e finalizou as " . date("H:i:s");